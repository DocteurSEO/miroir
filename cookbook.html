<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéì Miroir.js Interactive Tutorial</title>
    <link rel="stylesheet" href="styles/miroir.css">
    <style>
        :root {
            --tutorial-white: #ffffff;
            --tutorial-light-gray: #f8f9fa;
            --tutorial-gray: #6c757d;
            --tutorial-dark: #343a40;
            --tutorial-blue: #0969da;
            --tutorial-success: #28a745;
            --tutorial-border: #e9ecef;
            --font-sans: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            --font-mono: 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'source-code-pro', monospace;
        }

        body {
            font-family: var(--font-sans);
            background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 50%, #f1f3f4 100%);
            min-height: 100vh;
            color: var(--tutorial-dark);
            margin: 0;
            padding: 0;
        }

        .tutorial-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* Header */
        .tutorial-header {
            text-align: center;
            margin-bottom: 3rem;
            padding: 2rem;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            border: 1px solid var(--tutorial-border);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
        }

        .tutorial-title {
            font-size: 3rem;
            font-weight: 700;
            background: linear-gradient(45deg, var(--tutorial-dark), var(--tutorial-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1rem;
        }

        .tutorial-subtitle {
            font-size: 1.25rem;
            color: var(--tutorial-gray);
            margin-bottom: 2rem;
        }

        /* Progress Bar */
        .progress-container {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin: 2rem 0;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 12px;
            border: 1px solid var(--tutorial-border);
        }

        .step-indicator {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            flex: 1;
        }

        .step-number {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.875rem;
            transition: all 0.3s ease;
        }

        .step-number.active {
            background: var(--tutorial-blue);
            color: white;
        }

        .step-number.completed {
            background: var(--tutorial-success);
            color: white;
        }

        .step-number.pending {
            background: var(--tutorial-light-gray);
            color: var(--tutorial-gray);
        }

        .step-line {
            flex: 1;
            height: 2px;
            background: var(--tutorial-border);
            position: relative;
        }

        .step-line.completed::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            width: 100%;
            background: var(--tutorial-success);
        }

        /* Tutorial Steps */
        .tutorial-step {
            display: none;
            margin-bottom: 3rem;
        }

        .tutorial-step.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .step-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .code-panel, .result-panel {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(15px);
            border: 1px solid var(--tutorial-border);
            border-radius: 16px;
            padding: 1.5rem;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08);
        }

        .panel-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--tutorial-dark);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .code-editor {
            background: #f8f9fa;
            border: 1px solid var(--tutorial-border);
            border-radius: 8px;
            padding: 1rem;
            font-family: var(--font-mono);
            font-size: 0.875rem;
            line-height: 1.6;
            color: var(--tutorial-dark);
            min-height: 300px;
            white-space: pre-wrap;
            overflow-x: auto;
        }

        .result-frame {
            border: 1px solid var(--tutorial-border);
            border-radius: 8px;
            padding: 1rem;
            min-height: 300px;
            background: white;
        }

        /* Explanation */
        .explanation {
            background: rgba(9, 105, 218, 0.05);
            border: 1px solid rgba(9, 105, 218, 0.2);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .explanation h4 {
            color: var(--tutorial-blue);
            margin-bottom: 0.75rem;
            font-size: 1.125rem;
        }

        .explanation p {
            color: var(--tutorial-dark);
            line-height: 1.6;
            margin-bottom: 0.75rem;
        }

        .explanation code {
            background: rgba(9, 105, 218, 0.1);
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-family: var(--font-mono);
            font-size: 0.875rem;
        }

        /* Navigation */
        .step-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem;
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid var(--tutorial-border);
            border-radius: 12px;
            backdrop-filter: blur(15px);
        }

        .nav-btn {
            background: var(--tutorial-blue);
            color: white;
            border: none;
            padding: 0.75rem 2rem;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .nav-btn:hover {
            background: #0860ca;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(9, 105, 218, 0.3);
        }

        .nav-btn:disabled {
            background: var(--tutorial-gray);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .nav-btn.secondary {
            background: transparent;
            color: var(--tutorial-blue);
            border: 1px solid var(--tutorial-blue);
        }

        .nav-btn.secondary:hover {
            background: var(--tutorial-blue);
            color: white;
        }

        .try-btn {
            background: var(--tutorial-success);
            color: white;
            border: none;
            padding: 0.5rem 1.5rem;
            border-radius: 6px;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .try-btn:hover {
            background: #218838;
            transform: translateY(-1px);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .tutorial-container {
                padding: 1rem;
            }

            .tutorial-title {
                font-size: 2rem;
            }

            .step-content {
                grid-template-columns: 1fr;
            }

            .step-navigation {
                flex-direction: column;
                gap: 1rem;
            }

            .nav-btn {
                width: 100%;
                justify-content: center;
            }
        }

        /* Demo specific styles */
        .demo-app {
            padding: 1rem;
            font-family: var(--font-sans);
        }

        .demo-app input {
            width: 100%;
            padding: 0.5rem;
            margin: 0.5rem 0;
            border: 1px solid var(--tutorial-border);
            border-radius: 4px;
            font-size: 1rem;
        }

        .demo-app button {
            background: var(--tutorial-blue);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            margin: 0.25rem;
            font-size: 0.875rem;
        }

        .demo-app button:hover {
            background: #0860ca;
        }

        .demo-app .counter {
            font-size: 2rem;
            font-weight: bold;
            text-align: center;
            margin: 1rem 0;
            color: var(--tutorial-blue);
        }

        .demo-app .todo-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem;
            margin: 0.25rem 0;
            background: var(--tutorial-light-gray);
            border-radius: 4px;
        }

        .demo-app .todo-item.completed {
            opacity: 0.6;
            text-decoration: line-through;
        }

        /* Advanced demo styles */
        .demo-app .status-indicator {
            padding: 0.75rem;
            border-radius: 8px;
            margin: 1rem 0;
            border: 1px solid var(--tutorial-border);
            transition: all 0.3s ease;
        }

        .demo-app .status-indicator.active {
            background: #d4edda;
            border-color: #c3e6cb;
            color: #155724;
        }

        .demo-app .list-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.5rem;
            margin: 0.25rem 0;
            background: var(--tutorial-light-gray);
            border-radius: 4px;
            border: 1px solid var(--tutorial-border);
        }

        .demo-app .form-group {
            margin-bottom: 1.5rem;
        }

        .demo-app .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--tutorial-dark);
        }

        .demo-app .error-message {
            color: #dc3545;
            font-size: 0.875rem;
            margin-top: 0.25rem;
        }

        .demo-app .success-message {
            color: var(--tutorial-success);
            font-weight: 600;
            text-align: center;
            margin-top: 1rem;
            padding: 0.75rem;
            background: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 4px;
        }

        .demo-app .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .demo-app .stat-card {
            background: var(--tutorial-light-gray);
            padding: 1.5rem;
            border-radius: 12px;
            text-align: center;
            border: 1px solid var(--tutorial-border);
            transition: transform 0.2s ease;
        }

        .demo-app .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .demo-app .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--tutorial-blue);
            margin: 0.5rem 0;
        }

        .demo-app .stat-change {
            font-size: 0.875rem;
            font-weight: 500;
        }

        .demo-app .stat-change.positive {
            color: var(--tutorial-success);
        }

        .demo-app .stat-change.negative {
            color: #dc3545;
        }

        .demo-app .progress-bar {
            background: #e9ecef;
            height: 8px;
            border-radius: 4px;
            margin-top: 0.5rem;
            overflow: hidden;
        }

        .demo-app .progress-fill {
            background: var(--tutorial-blue);
            height: 100%;
            transition: width 0.3s ease;
            border-radius: 4px;
        }

        .demo-app .activity-log {
            margin-top: 2rem;
        }

        .demo-app .log-entries {
            background: var(--tutorial-light-gray);
            padding: 1rem;
            border-radius: 8px;
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid var(--tutorial-border);
        }

        .demo-app .controls {
            display: flex;
            gap: 1rem;
            align-items: center;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .demo-app .controls input {
            width: auto;
            min-width: 120px;
            margin: 0;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        @keyframes slideIn {
            from { transform: translateX(-100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
    </style>
</head>
<body>
    <div class="tutorial-container">
        <!-- Header -->
        <div class="tutorial-header">
            <h1 class="tutorial-title">üéì Miroir.js Interactive Tutorial</h1>
            <p class="tutorial-subtitle">Learn reactive data binding step by step with hands-on examples</p>
            
            <!-- Progress -->
            <div class="progress-container">
                <div class="step-indicator">
                    <div class="step-number active" data-step="0">üìö</div>
                    <div class="step-line"></div>
                </div>
                <div class="step-indicator">
                    <div class="step-number pending" data-step="1">1</div>
                    <div class="step-line"></div>
                </div>
                <div class="step-indicator">
                    <div class="step-number pending" data-step="2">2</div>
                    <div class="step-line"></div>
                </div>
                <div class="step-indicator">
                    <div class="step-number pending" data-step="3">3</div>
                    <div class="step-line"></div>
                </div>
                <div class="step-indicator">
                    <div class="step-number pending" data-step="4">4</div>
                    <div class="step-line"></div>
                </div>
                <div class="step-indicator">
                    <div class="step-number pending" data-step="5">5</div>
                    <div class="step-line"></div>
                </div>
                <div class="step-indicator">
                    <div class="step-number pending" data-step="6">6</div>
                </div>
            </div>
        </div>

        <!-- Step 0: Introduction -->
        <div class="tutorial-step active" data-step="0">
            <div class="explanation">
                <h4>ü™û Welcome to Miroir.js!</h4>
                <p>Miroir.js is an ultra-lightweight (2KB) reactive data binding library with zero dependencies. In this comprehensive tutorial, you'll master:</p>
                <ul style="margin-left: 2rem; color: var(--tutorial-dark);">
                    <li><strong>Step 1:</strong> HTML Templates - Simple <code>{{ variable }}</code> syntax with automatic DOM updates</li>
                    <li><strong>Step 2:</strong> JavaScript Bindings - CSS selector based configuration for precise control</li>
                    <li><strong>Step 3:</strong> Extensions System - Create powerful custom directives</li>
                    <li><strong>Step 4:</strong> Advanced Patterns - Real-world applications and best practices</li>
                    <li><strong>Step 5:</strong> Form Validation - Build robust user input handling</li>
                    <li><strong>Step 6:</strong> Dashboard Example - Real-time data updates and visualizations</li>
                </ul>
                <p><strong>Why Miroir.js?</strong> Perfect for adding reactivity to existing HTML, prototypes, widgets, and learning reactive programming concepts without framework overhead.</p>
            </div>
            
            <div class="step-navigation">
                <div></div>
                <button class="nav-btn" onclick="startTutorial()">
                    Start Tutorial ‚Üí
                </button>
            </div>
        </div>

        <!-- Step 1: Simple Counter -->
        <div class="tutorial-step" data-step="1">
            <div class="explanation">
                <h4>üìä Step 1: Simple Counter with HTML Templates</h4>
                <p>The easiest way to use Miroir.js is with HTML templates. Use <code>{{ variable }}</code> to display reactive data and <code>d-model</code> for two-way binding.</p>
                <p><strong>Key concepts:</strong> reactive state, template variables, automatic DOM updates</p>
            </div>

            <div class="step-content">
                <div class="code-panel">
                    <div class="panel-title">üíª Code</div>
                    <div class="code-editor" id="step1-code">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Counter App&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="demo-app"&gt;
        &lt;h2&gt;Simple Counter&lt;/h2&gt;
        
        &lt;!-- HTML Template with {{ }} --&gt;
        &lt;div class="bind"&gt;
            &lt;div class="counter"&gt;{{ count }}&lt;/div&gt;
            &lt;p&gt;You clicked {{ count }} times&lt;/p&gt;
        &lt;/div&gt;
        
        &lt;button onclick="app.count++"&gt;+1&lt;/button&gt;
        &lt;button onclick="app.count--"&gt;-1&lt;/button&gt;
        &lt;button onclick="app.count = 0"&gt;Reset&lt;/button&gt;
    &lt;/div&gt;

    &lt;script src="miroir.js"&gt;&lt;/script&gt;
    &lt;script&gt;
        // Create reactive state
        const app = miroir.create({
            count: 0
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</div>
                    <button class="try-btn" onclick="runStep1()">‚ñ∂ Try it</button>
                </div>

                <div class="result-panel">
                    <div class="panel-title">‚ú® Result</div>
                    <div class="result-frame" id="step1-result">
                        <div class="demo-app">
                            <h2>Simple Counter</h2>
                            <div class="bind">
                                <div class="counter">0</div>
                                <p>You clicked 0 times</p>
                            </div>
                            <button onclick="demoApps.step1.count++">+1</button>
                            <button onclick="demoApps.step1.count--">-1</button>
                            <button onclick="demoApps.step1.count = 0">Reset</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="step-navigation">
                <button class="nav-btn secondary" onclick="prevStep()">
                    ‚Üê Back
                </button>
                <button class="nav-btn" onclick="nextStep()">
                    Next: JavaScript Bindings ‚Üí
                </button>
            </div>
        </div>

        <!-- Step 2: Contact Form -->
        <div class="tutorial-step" data-step="2">
            <div class="explanation">
                <h4>üîó Step 2: Contact Form with JavaScript Bindings</h4>
                <p>JavaScript bindings give you more control. Map CSS selectors to state properties using the <code>bindings</code> option.</p>
                <p><strong>Key concepts:</strong> CSS selector bindings, bidirectional inputs, real-time preview</p>
            </div>

            <div class="step-content">
                <div class="code-panel">
                    <div class="panel-title">üíª Code</div>
                    <div class="code-editor" id="step2-code">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;body&gt;
    &lt;div class="demo-app"&gt;
        &lt;h2&gt;Contact Form&lt;/h2&gt;
        
        &lt;!-- Form inputs --&gt;
        &lt;input id="name-input" placeholder="Your name"&gt;
        &lt;input id="email-input" placeholder="Your email"&gt;
        &lt;textarea id="message-input" placeholder="Your message"&gt;&lt;/textarea&gt;
        
        &lt;!-- Live preview --&gt;
        &lt;div style="margin-top: 1rem; padding: 1rem; background: #f8f9fa; border-radius: 4px;"&gt;
            &lt;h4&gt;Live Preview:&lt;/h4&gt;
            &lt;p&gt;&lt;strong&gt;Name:&lt;/strong&gt; &lt;span class="preview-name"&gt;[Enter name]&lt;/span&gt;&lt;/p&gt;
            &lt;p&gt;&lt;strong&gt;Email:&lt;/strong&gt; &lt;span class="preview-email"&gt;[Enter email]&lt;/span&gt;&lt;/p&gt;
            &lt;p&gt;&lt;strong&gt;Message:&lt;/strong&gt; &lt;span class="preview-message"&gt;[Enter message]&lt;/span&gt;&lt;/p&gt;
        &lt;/div&gt;
    &lt;/div&gt;

    &lt;script src="miroir.js"&gt;&lt;/script&gt;
    &lt;script&gt;
        // JavaScript bindings approach
        const app = miroir.create({
            name: '',
            email: '',
            message: ''
        }, {
            bindings: [
                { '#name-input': 'name' },
                { '#email-input': 'email' },
                { '#message-input': 'message' },
                { '.preview-name': 'name' },
                { '.preview-email': 'email' },
                { '.preview-message': 'message' }
            ]
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</div>
                    <button class="try-btn" onclick="runStep2()">‚ñ∂ Try it</button>
                </div>

                <div class="result-panel">
                    <div class="panel-title">‚ú® Result</div>
                    <div class="result-frame" id="step2-result">
                        <div class="demo-app">
                            <h2>Contact Form</h2>
                            <input id="demo-name" placeholder="Your name">
                            <input id="demo-email" placeholder="Your email">
                            <textarea id="demo-message" placeholder="Your message" style="width: 100%; height: 60px; resize: vertical;"></textarea>
                            
                            <div style="margin-top: 1rem; padding: 1rem; background: #f8f9fa; border-radius: 4px;">
                                <h4>Live Preview:</h4>
                                <p><strong>Name:</strong> <span class="demo-preview-name">[Enter name]</span></p>
                                <p><strong>Email:</strong> <span class="demo-preview-email">[Enter email]</span></p>
                                <p><strong>Message:</strong> <span class="demo-preview-message">[Enter message]</span></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="step-navigation">
                <button class="nav-btn secondary" onclick="prevStep()">
                    ‚Üê Back
                </button>
                <button class="nav-btn" onclick="nextStep()">
                    Next: Extensions ‚Üí
                </button>
            </div>
        </div>

        <!-- Step 3: Todo App -->
        <div class="tutorial-step" data-step="3">
            <div class="explanation">
                <h4>üöÄ Step 3: Todo App with Extensions</h4>
                <p>Extensions are where Miroir.js shines! Create custom directives like <code>m-show</code>, <code>m-each</code>, <code>m-count</code> to handle complex scenarios with elegant simplicity.</p>
                <p><strong>Key concepts:</strong> custom directives, list rendering, conditional display, array manipulation</p>
            </div>

            <div class="step-content">
                <div class="code-panel">
                    <div class="panel-title">üíª Code</div>
                    <div class="code-editor" id="step3-code">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;body&gt;
    &lt;div class="demo-app"&gt;
        &lt;h2&gt;Todo App&lt;/h2&gt;
        
        &lt;p&gt;Tasks: &lt;span class="task-count"&gt;0&lt;/span&gt;&lt;/p&gt;
        
        &lt;input id="new-task" placeholder="Add new task..." 
               onkeypress="if(event.key==='Enter') addTask()"&gt;
        &lt;button onclick="addTask()"&gt;Add&lt;/button&gt;
        
        &lt;div id="todo-list"&gt;&lt;/div&gt;
        
        &lt;div class="empty-state" m-show="isEmpty"&gt;
            No tasks yet! Add one above.
        &lt;/div&gt;
    &lt;/div&gt;

    &lt;script src="miroir.js"&gt;&lt;/script&gt;
    &lt;script&gt;
        // Load extensions
        miroir.extend('m-show', (el, prop, state) =&gt; {
            el.style.display = state[prop] ? 'block' : 'none';
        });
        
        miroir.extend('m-count', (el, prop, state) =&gt; {
            const value = state[prop];
            el.textContent = Array.isArray(value) ? value.length : value;
        });

        const app = miroir.create({
            newTask: '',
            todos: [],
            isEmpty: true
        }, {
            bindings: [
                { '#new-task': 'newTask' },
                { '.task-count': 'todos' },
            ]
        });

        function addTask() {
            if (app.newTask.trim()) {
                app.todos.push({
                    id: Date.now(),
                    text: app.newTask.trim(),
                    done: false
                });
                app.newTask = '';
                app.isEmpty = app.todos.length === 0;
                renderTodos();
            }
        }

        function renderTodos() {
            const list = document.getElementById('todo-list');
            list.innerHTML = app.todos.map((todo, i) =&gt; `
                &lt;div class="todo-item ${todo.done ? 'completed' : ''}"&gt;
                    &lt;input type="checkbox" ${todo.done ? 'checked' : ''} 
                           onchange="toggleTodo(${i})"&gt;
                    &lt;span&gt;${todo.text}&lt;/span&gt;
                    &lt;button onclick="deleteTodo(${i})" style="margin-left: auto;"&gt;√ó&lt;/button&gt;
                &lt;/div&gt;
            `).join('');
        }

        function toggleTodo(index) {
            app.todos[index].done = !app.todos[index].done;
            renderTodos();
        }

        function deleteTodo(index) {
            app.todos.splice(index, 1);
            app.isEmpty = app.todos.length === 0;
            renderTodos();
        }
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</div>
                    <button class="try-btn" onclick="runStep3()">‚ñ∂ Try it</button>
                </div>

                <div class="result-panel">
                    <div class="panel-title">‚ú® Result</div>
                    <div class="result-frame" id="step3-result">
                        <div class="demo-app">
                            <h2>Todo App</h2>
                            <p>Tasks: <span id="demo-task-count">0</span></p>
                            <input id="demo-new-task" placeholder="Add new task..." onkeypress="if(event.key==='Enter') demoAddTask()">
                            <button onclick="demoAddTask()">Add</button>
                            <div id="demo-todo-list"></div>
                            <div id="demo-empty-state" style="color: #666; padding: 1rem; text-align: center;">
                                No tasks yet! Add one above.
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="step-navigation">
                <button class="nav-btn secondary" onclick="prevStep()">
                    ‚Üê Back
                </button>
                <button class="nav-btn" onclick="nextStep()">
                    Next: Advanced Patterns ‚Üí
                </button>
            </div>
        </div>

        <!-- Step 4: Advanced Extensions -->
        <div class="tutorial-step" data-step="4">
            <div class="explanation">
                <h4>üéÜ Step 4: Advanced Extensions & Patterns</h4>
                <p>Explore powerful extensions like <code>m-class</code>, <code>m-each</code>, and <code>m-validate</code>. Learn how to create dynamic lists, conditional styling, and input validation.</p>
                <p><strong>Key concepts:</strong> advanced directives, dynamic classes, list iteration, validation patterns</p>
            </div>

            <div class="step-content">
                <div class="code-panel">
                    <div class="panel-title">üíª Code</div>
                    <div class="code-editor" id="step4-code">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;body&gt;
    &lt;div class="demo-app"&gt;
        &lt;h2&gt;Advanced Extensions Demo&lt;/h2&gt;
        
        &lt;!-- Dynamic Classes --&gt;
        &lt;div class="status-indicator" m-class="active:isOnline"&gt;
            Status: &lt;span class="status-text"&gt;{{ status }}&lt;/span&gt;
        &lt;/div&gt;
        
        &lt;button onclick="app.isOnline = !app.isOnline"&gt;
            Toggle Status
        &lt;/button&gt;
        
        &lt;!-- Shopping List with m-each --&gt;
        &lt;h3&gt;Shopping List (&lt;span m-count="items"&gt;0&lt;/span&gt; items)&lt;/h3&gt;
        
        &lt;input d-model="newItem" placeholder="Add item..." 
               onkeypress="if(event.key==='Enter') addItem()"&gt;
        &lt;button onclick="addItem()"&gt;Add Item&lt;/button&gt;
        
        &lt;div class="item-list" m-each="item in items"&gt;&lt;/div&gt;
        
        &lt;!-- Form Validation --&gt;
        &lt;h3&gt;Email Validation&lt;/h3&gt;
        &lt;input d-model="email" placeholder="Enter email" 
               m-validate="email" class="form-input"&gt;
        &lt;div class="validation-message" m-show="emailError"&gt;
            Please enter a valid email address
        &lt;/div&gt;
    &lt;/div&gt;

    &lt;script src="miroir.js"&gt;&lt;/script&gt;
    &lt;script&gt;
        // Define advanced extensions
        miroir.extend('m-class', (el, expr, state) =&gt; {
            const [className, prop] = expr.split(':');
            el.classList.toggle(className, !!state[prop]);
        });
        
        miroir.extend('m-each', (el, expr, state) =&gt; {
            const [itemName, arrayProp] = expr.split(' in ');
            const array = state[arrayProp] || [];
            el.innerHTML = array.map((item, i) =&gt; `
                &lt;div class="list-item"&gt;
                    &lt;span&gt;${item}&lt;/span&gt;
                    &lt;button onclick="removeItem(${i})"&gt;√ó&lt;/button&gt;
                &lt;/div&gt;
            `).join('');
        });
        
        miroir.extend('m-count', (el, prop, state) =&gt; {
            const value = state[prop];
            el.textContent = Array.isArray(value) ? value.length : value;
        });
        
        miroir.extend('m-validate', (el, rules, state) =&gt; {
            const prop = el.getAttribute('d-model');
            const value = state[prop] || '';
            const isValid = rules === 'email' ? /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(value) : true;
            el.classList.toggle('error', !isValid && value.length > 0);
            state[prop + 'Error'] = !isValid && value.length > 0;
        });

        const app = miroir.create({
            isOnline: false,
            status: 'Offline',
            newItem: '',
            items: ['Milk', 'Bread', 'Eggs'],
            email: '',
            emailError: false
        });
        
        // Watch status changes
        miroir.watch('isOnline', (online) =&gt; {
            app.status = online ? 'Online' : 'Offline';
        });
        
        function addItem() {
            if (app.newItem.trim()) {
                app.items.push(app.newItem.trim());
                app.newItem = '';
            }
        }
        
        function removeItem(index) {
            app.items.splice(index, 1);
        }
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</div>
                    <button class="try-btn" onclick="runStep4()">‚ñ∂ Try it</button>
                </div>

                <div class="result-panel">
                    <div class="panel-title">‚ú® Result</div>
                    <div class="result-frame" id="step4-result">
                        <div class="demo-app">
                            <h2>Advanced Extensions Demo</h2>
                            
                            <div class="status-indicator" id="demo-status" style="padding: 0.5rem; border-radius: 4px; margin: 1rem 0;">
                                Status: <span id="demo-status-text">Offline</span>
                            </div>
                            
                            <button onclick="toggleDemoStatus()">Toggle Status</button>
                            
                            <h3>Shopping List (<span id="demo-item-count">3</span> items)</h3>
                            
                            <input id="demo-new-item" placeholder="Add item..." onkeypress="if(event.key==='Enter') addDemoItem()">
                            <button onclick="addDemoItem()">Add Item</button>
                            
                            <div id="demo-item-list"></div>
                            
                            <h3>Email Validation</h3>
                            <input id="demo-email" placeholder="Enter email" oninput="validateDemoEmail()" style="margin-bottom: 0.5rem;">
                            <div id="demo-validation-message" style="color: red; font-size: 0.875rem; display: none;">
                                Please enter a valid email address
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="step-navigation">
                <button class="nav-btn secondary" onclick="prevStep()">
                    ‚Üê Back
                </button>
                <button class="nav-btn" onclick="nextStep()">
                    Next: Form Validation ‚Üí
                </button>
            </div>
        </div>

        <!-- Step 5: Form Validation -->
        <div class="tutorial-step" data-step="5">
            <div class="explanation">
                <h4>üìã Step 5: Advanced Form Validation</h4>
                <p>Build robust forms with real-time validation, custom rules, and user-friendly error messages using Miroir.js extensions.</p>
                <p><strong>Key concepts:</strong> validation rules, error handling, user experience patterns</p>
            </div>

            <div class="step-content">
                <div class="code-panel">
                    <div class="panel-title">üíª Code</div>
                    <div class="code-editor" id="step5-code">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;body&gt;
    &lt;div class="demo-app"&gt;
        &lt;h2&gt;Registration Form&lt;/h2&gt;
        
        &lt;form class="validation-form"&gt;
            &lt;div class="form-group"&gt;
                &lt;label&gt;Username:&lt;/label&gt;
                &lt;input d-model="username" m-validate="required|minLength:3" 
                       placeholder="At least 3 characters"&gt;
                &lt;div class="error-message" m-show="usernameError"&gt;{{ usernameErrorMsg }}&lt;/div&gt;
            &lt;/div&gt;
            
            &lt;div class="form-group"&gt;
                &lt;label&gt;Email:&lt;/label&gt;
                &lt;input d-model="email" m-validate="required|email" 
                       placeholder="your@email.com"&gt;
                &lt;div class="error-message" m-show="emailError"&gt;{{ emailErrorMsg }}&lt;/div&gt;
            &lt;/div&gt;
            
            &lt;div class="form-group"&gt;
                &lt;label&gt;Password:&lt;/label&gt;
                &lt;input type="password" d-model="password" 
                       m-validate="required|minLength:6" 
                       placeholder="At least 6 characters"&gt;
                &lt;div class="error-message" m-show="passwordError"&gt;{{ passwordErrorMsg }}&lt;/div&gt;
            &lt;/div&gt;
            
            &lt;div class="form-group"&gt;
                &lt;label&gt;Confirm Password:&lt;/label&gt;
                &lt;input type="password" d-model="confirmPassword" 
                       m-validate="required|match:password" 
                       placeholder="Repeat password"&gt;
                &lt;div class="error-message" m-show="confirmPasswordError"&gt;{{ confirmPasswordErrorMsg }}&lt;/div&gt;
            &lt;/div&gt;
            
            &lt;button type="button" onclick="submitForm()" 
                    class="submit-btn" m-class="disabled:!formValid"&gt;
                Register
            &lt;/button&gt;
            
            &lt;div class="success-message" m-show="submitted"&gt;
                ‚úì Registration successful!
            &lt;/div&gt;
        &lt;/form&gt;
    &lt;/div&gt;

    &lt;script src="miroir.js"&gt;&lt;/script&gt;
    &lt;script&gt;
        // Enhanced validation extension
        miroir.extend('m-validate', (el, rules, state) =&gt; {
            const prop = el.getAttribute('d-model');
            const value = state[prop] || '';
            const ruleList = rules.split('|');
            
            let errors = [];
            
            ruleList.forEach(rule =&gt; {
                if (rule === 'required' && !value.trim()) {
                    errors.push('This field is required');
                } else if (rule === 'email' && value && !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(value)) {
                    errors.push('Please enter a valid email');
                } else if (rule.startsWith('minLength:')) {
                    const minLen = parseInt(rule.split(':')[1]);
                    if (value && value.length &lt; minLen) {
                        errors.push(`Minimum ${minLen} characters required`);
                    }
                } else if (rule.startsWith('match:')) {
                    const matchProp = rule.split(':')[1];
                    if (value && value !== state[matchProp]) {
                        errors.push('Passwords do not match');
                    }
                }
            });
            
            const hasError = errors.length &gt; 0;
            el.classList.toggle('error', hasError);
            state[prop + 'Error'] = hasError;
            state[prop + 'ErrorMsg'] = errors[0] || '';
        });

        const app = miroir.create({
            username: '',
            email: '',
            password: '',
            confirmPassword: '',
            usernameError: false,
            emailError: false,
            passwordError: false,
            confirmPasswordError: false,
            usernameErrorMsg: '',
            emailErrorMsg: '',
            passwordErrorMsg: '',
            confirmPasswordErrorMsg: '',
            formValid: false,
            submitted: false
        });
        
        // Watch all fields for form validity
        ['username', 'email', 'password', 'confirmPassword'].forEach(field =&gt; {
            miroir.watch(field, () =&gt; {
                updateFormValidity();
            });
        });
        
        function updateFormValidity() {
            app.formValid = !app.usernameError && !app.emailError && 
                           !app.passwordError && !app.confirmPasswordError &&
                           app.username && app.email && app.password && app.confirmPassword;
        }
        
        function submitForm() {
            if (app.formValid) {
                app.submitted = true;
                setTimeout(() =&gt; app.submitted = false, 3000);
            }
        }
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</div>
                    <button class="try-btn" onclick="runStep5()">‚ñ∂ Try it</button>
                </div>

                <div class="result-panel">
                    <div class="panel-title">‚ú® Result</div>
                    <div class="result-frame" id="step5-result">
                        <div class="demo-app">
                            <h2>Registration Form</h2>
                            <form class="validation-form" style="max-width: 400px;">
                                <div style="margin-bottom: 1rem;">
                                    <label style="display: block; margin-bottom: 0.25rem; font-weight: 500;">Username:</label>
                                    <input id="demo-username" placeholder="At least 3 characters" style="width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px;">
                                    <div id="demo-username-error" style="color: red; font-size: 0.875rem; margin-top: 0.25rem; display: none;"></div>
                                </div>
                                
                                <div style="margin-bottom: 1rem;">
                                    <label style="display: block; margin-bottom: 0.25rem; font-weight: 500;">Email:</label>
                                    <input id="demo-email-form" placeholder="your@email.com" style="width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px;">
                                    <div id="demo-email-form-error" style="color: red; font-size: 0.875rem; margin-top: 0.25rem; display: none;"></div>
                                </div>
                                
                                <div style="margin-bottom: 1rem;">
                                    <label style="display: block; margin-bottom: 0.25rem; font-weight: 500;">Password:</label>
                                    <input type="password" id="demo-password" placeholder="At least 6 characters" style="width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px;">
                                    <div id="demo-password-error" style="color: red; font-size: 0.875rem; margin-top: 0.25rem; display: none;"></div>
                                </div>
                                
                                <div style="margin-bottom: 1rem;">
                                    <label style="display: block; margin-bottom: 0.25rem; font-weight: 500;">Confirm Password:</label>
                                    <input type="password" id="demo-confirm-password" placeholder="Repeat password" style="width: 100%; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px;">
                                    <div id="demo-confirm-password-error" style="color: red; font-size: 0.875rem; margin-top: 0.25rem; display: none;"></div>
                                </div>
                                
                                <button type="button" id="demo-submit-btn" onclick="submitDemoForm()" style="background: #ccc; cursor: not-allowed; padding: 0.75rem 1.5rem; border: none; border-radius: 4px; width: 100%;">
                                    Register
                                </button>
                                
                                <div id="demo-success-message" style="color: green; margin-top: 1rem; text-align: center; display: none;">
                                    ‚úì Registration successful!
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>

            <div class="step-navigation">
                <button class="nav-btn secondary" onclick="prevStep()">
                    ‚Üê Back
                </button>
                <button class="nav-btn" onclick="nextStep()">
                    Next: Dashboard ‚Üí
                </button>
            </div>
        </div>

        <!-- Step 6: Dashboard -->
        <div class="tutorial-step" data-step="6">
            <div class="explanation">
                <h4>üìä Step 6: Real-time Dashboard</h4>
                <p>Create a live dashboard with automatic updates, data visualization, and interactive controls using Miroir.js watchers and extensions.</p>
                <p><strong>Key concepts:</strong> real-time updates, data formatting, intervals, computed values</p>
            </div>

            <div class="step-content">
                <div class="code-panel">
                    <div class="panel-title">üíª Code</div>
                    <div class="code-editor" id="step6-code">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;body&gt;
    &lt;div class="demo-app"&gt;
        &lt;h2&gt;Live Dashboard&lt;/h2&gt;
        
        &lt;div class="controls"&gt;
            &lt;button onclick="toggleUpdates()"&gt;{{ isUpdating ? 'Pause' : 'Start' }} Updates&lt;/button&gt;
            &lt;input d-model="updateInterval" type="number" 
                   placeholder="Interval (ms)" min="1000" max="10000"&gt;
        &lt;/div&gt;
        
        &lt;div class="stats-grid"&gt;
            &lt;div class="stat-card"&gt;
                &lt;h3&gt;Users Online&lt;/h3&gt;
                &lt;div class="stat-value" m-animate="users"&gt;{{ users }}&lt;/div&gt;
                &lt;div class="stat-change" m-class="positive:usersTrend&gt;0|negative:usersTrend&lt;0"&gt;
                    {{ usersTrend &gt; 0 ? '+' : '' }}{{ usersTrend }}
                &lt;/div&gt;
            &lt;/div&gt;
            
            &lt;div class="stat-card"&gt;
                &lt;h3&gt;Revenue&lt;/h3&gt;
                &lt;div class="stat-value" m-currency="revenue"&gt;$0&lt;/div&gt;
                &lt;div class="stat-change" m-class="positive:revenueTrend&gt;0|negative:revenueTrend&lt;0"&gt;
                    {{ revenueTrend &gt; 0 ? '+' : '' }}{{ revenueTrend | currency }}
                &lt;/div&gt;
            &lt;/div&gt;
            
            &lt;div class="stat-card"&gt;
                &lt;h3&gt;Server Load&lt;/h3&gt;
                &lt;div class="stat-value"&gt;{{ serverLoad }}%&lt;/div&gt;
                &lt;div class="progress-bar"&gt;
                    &lt;div class="progress-fill" m-style="width:{{ serverLoad }}%"&gt;&lt;/div&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        
        &lt;div class="activity-log"&gt;
            &lt;h3&gt;Recent Activity&lt;/h3&gt;
            &lt;div class="log-entries" m-each="entry in activityLog"&gt;&lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;

    &lt;script src="miroir.js"&gt;&lt;/script&gt;
    &lt;script&gt;
        // Dashboard extensions
        miroir.extend('m-currency', (el, prop, state) =&gt; {
            const value = state[prop] || 0;
            el.textContent = new Intl.NumberFormat('en-US', {
                style: 'currency',
                currency: 'USD'
            }).format(value);
        });
        
        miroir.extend('m-style', (el, expr, state) =&gt; {
            // Simple style binding: "property:value"
            const [property, value] = expr.split(':');
            const processedValue = value.replace(/\{\{(.*?)\}\}/g, (match, prop) =&gt; {
                return state[prop.trim()] || 0;
            });
            el.style[property] = processedValue;
        });
        
        miroir.extend('m-animate', (el, prop, state) =&gt; {
            const newValue = state[prop];
            const oldValue = parseInt(el.textContent) || 0;
            
            if (newValue !== oldValue) {
                el.style.transition = 'transform 0.3s ease';
                el.style.transform = 'scale(1.1)';
                setTimeout(() =&gt; {
                    el.style.transform = 'scale(1)';
                }, 300);
            }
            el.textContent = newValue;
        });

        const dashboard = miroir.create({
            users: 1250,
            revenue: 25000,
            serverLoad: 45,
            usersTrend: 0,
            revenueTrend: 0,
            isUpdating: false,
            updateInterval: 3000,
            activityLog: [
                { time: '10:30', action: 'User joined', user: 'john_doe' },
                { time: '10:28', action: 'Order placed', amount: '$125' },
                { time: '10:25', action: 'Payment processed', id: '#1234' }
            ]
        });
        
        let updateTimer;
        
        // Watch for interval changes
        miroir.watch('updateInterval', (interval) =&gt; {
            if (dashboard.isUpdating) {
                clearInterval(updateTimer);
                startUpdates();
            }
        });
        
        function toggleUpdates() {
            dashboard.isUpdating = !dashboard.isUpdating;
            if (dashboard.isUpdating) {
                startUpdates();
            } else {
                clearInterval(updateTimer);
            }
        }
        
        function startUpdates() {
            updateTimer = setInterval(() =&gt; {
                // Simulate data changes
                const userChange = Math.floor(Math.random() * 20) - 10;
                const revenueChange = Math.floor(Math.random() * 2000) - 1000;
                const loadChange = Math.floor(Math.random() * 20) - 10;
                
                dashboard.usersTrend = userChange;
                dashboard.revenueTrend = revenueChange;
                dashboard.users = Math.max(0, dashboard.users + userChange);
                dashboard.revenue = Math.max(0, dashboard.revenue + revenueChange);
                dashboard.serverLoad = Math.max(0, Math.min(100, dashboard.serverLoad + loadChange));
                
                // Add activity log entry
                const activities = [
                    'User joined', 'Order placed', 'Payment processed', 
                    'Server restarted', 'Backup completed'
                ];
                const randomActivity = activities[Math.floor(Math.random() * activities.length)];
                dashboard.activityLog.unshift({
                    time: new Date().toLocaleTimeString().slice(0, 5),
                    action: randomActivity,
                    user: 'user_' + Math.floor(Math.random() * 1000)
                });
                
                // Keep only last 5 entries
                if (dashboard.activityLog.length &gt; 5) {
                    dashboard.activityLog = dashboard.activityLog.slice(0, 5);
                }
            }, dashboard.updateInterval || 3000);
        }
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</div>
                    <button class="try-btn" onclick="runStep6()">‚ñ∂ Try it</button>
                </div>

                <div class="result-panel">
                    <div class="panel-title">‚ú® Result</div>
                    <div class="result-frame" id="step6-result">
                        <div class="demo-app">
                            <h2>Live Dashboard</h2>
                            
                            <div style="margin-bottom: 1rem;">
                                <button id="demo-toggle-btn" onclick="toggleDemoUpdates()">Start Updates</button>
                                <input id="demo-interval" type="number" placeholder="Interval (ms)" min="1000" max="10000" value="3000" style="margin-left: 0.5rem; padding: 0.25rem;">
                            </div>
                            
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem; margin-bottom: 1rem;">
                                <div style="background: #f8f9fa; padding: 1rem; border-radius: 8px; text-align: center;">
                                    <h4 style="margin: 0 0 0.5rem 0;">Users Online</h4>
                                    <div id="demo-users" style="font-size: 1.5rem; font-weight: bold; color: var(--tutorial-blue);">1250</div>
                                    <div id="demo-users-trend" style="font-size: 0.875rem;">0</div>
                                </div>
                                
                                <div style="background: #f8f9fa; padding: 1rem; border-radius: 8px; text-align: center;">
                                    <h4 style="margin: 0 0 0.5rem 0;">Revenue</h4>
                                    <div id="demo-revenue" style="font-size: 1.5rem; font-weight: bold; color: var(--tutorial-success);">$25,000</div>
                                    <div id="demo-revenue-trend" style="font-size: 0.875rem;">$0</div>
                                </div>
                                
                                <div style="background: #f8f9fa; padding: 1rem; border-radius: 8px; text-align: center;">
                                    <h4 style="margin: 0 0 0.5rem 0;">Server Load</h4>
                                    <div id="demo-server-load" style="font-size: 1.5rem; font-weight: bold;">45%</div>
                                    <div style="background: #e9ecef; height: 8px; border-radius: 4px; margin-top: 0.5rem;">
                                        <div id="demo-progress" style="background: var(--tutorial-blue); height: 100%; width: 45%; border-radius: 4px; transition: width 0.3s ease;"></div>
                                    </div>
                                </div>
                            </div>
                            
                            <div>
                                <h4>Recent Activity</h4>
                                <div id="demo-activity-log" style="background: #f8f9fa; padding: 1rem; border-radius: 8px; max-height: 150px; overflow-y: auto;">
                                    <div style="font-size: 0.875rem; margin-bottom: 0.25rem;">10:30 - User joined (user_123)</div>
                                    <div style="font-size: 0.875rem; margin-bottom: 0.25rem;">10:28 - Order placed ($125)</div>
                                    <div style="font-size: 0.875rem;">10:25 - Payment processed (#1234)</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="step-navigation">
                <button class="nav-btn secondary" onclick="prevStep()">
                    ‚Üê Back
                </button>
                <button class="nav-btn" onclick="finishTutorial()">
                    üéâ Complete Tutorial
                </button>
            </div>
        </div>

        <!-- Completion -->
        <div class="tutorial-step" data-step="7">
            <div class="explanation" style="text-align: center;">
                <h4>üéâ Congratulations!</h4>
                <p>You've mastered the complete Miroir.js toolkit! You now know:</p>
                <ul style="text-align: left; max-width: 600px; margin: 1rem auto;">
                    <li>‚úÖ HTML Templates with <code>{{ }}</code> syntax and automatic DOM updates</li>
                    <li>‚úÖ JavaScript bindings with CSS selectors for precise control</li>
                    <li>‚úÖ Extensions system with custom directives</li>
                    <li>‚úÖ Advanced patterns with <code>m-class</code>, <code>m-each</code>, <code>m-validate</code></li>
                    <li>‚úÖ Form validation with real-time feedback</li>
                    <li>‚úÖ Real-time dashboards with data visualization</li>
                </ul>
                <p><strong>Next steps:</strong></p>
                <ul style="text-align: left; max-width: 600px; margin: 1rem auto; list-style: none; padding: 0;">
                    <li>üìö Check out <a href="extensions.md" style="color: var(--tutorial-blue);">extensions.md</a> for 25+ ready-to-use extensions</li>
                    <li>üöÄ Explore <a href="demo.html" style="color: var(--tutorial-blue);">demo.html</a> for more complex examples</li>
                    <li>üìú Read <a href="MIROIR_FOR_LLM.md" style="color: var(--tutorial-blue);">MIROIR_FOR_LLM.md</a> for complete API reference</li>
                </ul>
            </div>
            
            <div class="step-navigation">
                <button class="nav-btn secondary" onclick="restartTutorial()">
                    üîÑ Restart Tutorial
                </button>
                <button class="nav-btn" onclick="window.open('demo.html', '_blank')">
                    üöÄ View Full Demo
                </button>
            </div>
        </div>
    </div>

    <script src="miroir.js"></script>
    <script>
        let currentStep = 0;
        const totalSteps = 7;
        
        // Debug function to test tutorial functionality
        window.debugTutorial = function() {
            console.log('Current step:', currentStep);
            console.log('Miroir loaded:', typeof miroir !== 'undefined');
            console.log('Demo apps:', demoApps);
            
            // Test if elements exist
            const step1Result = document.getElementById('step1-result');
            console.log('Step 1 result element:', step1Result);
            
            if (step1Result) {
                const bindElements = step1Result.querySelectorAll('.bind');
                console.log('Bind elements in step 1:', bindElements.length);
            }
        };
        
        // Make functions globally accessible for debugging
        window.nextStep = nextStep;
        window.prevStep = prevStep;
        window.startTutorial = startTutorial;
        window.finishTutorial = finishTutorial;
        window.restartTutorial = restartTutorial;
        window.runStep1 = runStep1;
        window.runStep2 = runStep2;
        window.runStep3 = runStep3;
        window.runStep4 = runStep4;
        window.runStep5 = runStep5;
        window.runStep6 = runStep6;
        
        // Demo apps for each step
        const demoApps = {
            step1: null,
            step2: null,
            step3: null,
            step4: null,
            step5: null,
            step6: null
        };

        function updateProgress() {
            document.querySelectorAll('.step-number').forEach((el, index) => {
                if (index < currentStep) {
                    el.className = 'step-number completed';
                } else if (index === currentStep) {
                    el.className = 'step-number active';
                } else {
                    el.className = 'step-number pending';
                }
            });

            document.querySelectorAll('.step-line').forEach((el, index) => {
                if (index < currentStep) {
                    el.className = 'step-line completed';
                } else {
                    el.className = 'step-line';
                }
            });
        }

        function showStep(step) {
            document.querySelectorAll('.tutorial-step').forEach(el => {
                el.classList.remove('active');
            });
            
            document.querySelector(`[data-step="${step}"]`).classList.add('active');
            currentStep = step;
            updateProgress();
        }

        function nextStep() {
            if (currentStep < totalSteps) {
                showStep(currentStep + 1);
                
                // Initialize the demo for the new step
                switch(currentStep + 1) {
                    case 1:
                        setTimeout(runStep1, 100);
                        break;
                    case 2:
                        setTimeout(runStep2, 100);
                        break;
                    case 3:
                        setTimeout(runStep3, 100);
                        break;
                    case 4:
                        setTimeout(runStep4, 100);
                        break;
                    case 5:
                        setTimeout(runStep5, 100);
                        break;
                    case 6:
                        setTimeout(runStep6, 100);
                        break;
                }
            }
        }

        function prevStep() {
            if (currentStep > 0) {
                showStep(currentStep - 1);
            }
        }

        function finishTutorial() {
            showStep(7);
        }

        function restartTutorial() {
            showStep(0);
        }
        
        function startTutorial() {
            showStep(1);
            setTimeout(runStep1, 100);
        }

        // Step 1: Simple Counter
        function runStep1() {
            try {
                if (!demoApps.step1) {
                    // Create the Miroir.js instance with proper binding to the result panel
                    demoApps.step1 = miroir.create({
                        count: 0
                    }, {
                        root: document.getElementById('step1-result'),
                        bindSelector: '.bind'
                    });
                    
                    console.log('Step 1 demo initialized:', demoApps.step1);
                }
            } catch (error) {
                console.error('Error initializing Step 1:', error);
            }
        }

        // Step 2: Contact Form  
        function runStep2() {
            try {
                if (!demoApps.step2) {
                    demoApps.step2 = miroir.create({
                        name: '',
                        email: '',
                        message: ''
                    }, {
                        root: document.getElementById('step2-result'),
                        bindings: [
                            { '#demo-name': 'name' },
                            { '#demo-email': 'email' },
                            { '#demo-message': 'message' },
                            { '.demo-preview-name': 'name' },
                            { '.demo-preview-email': 'email' },
                            { '.demo-preview-message': 'message' }
                        ]
                    });
                    
                    console.log('Step 2 demo initialized:', demoApps.step2);
                }
            } catch (error) {
                console.error('Error initializing Step 2:', error);
            }
        }

        // Step 3: Todo App
        let demoTodos = [];
        
        function demoAddTask() {
            const input = document.getElementById('demo-new-task');
            if (input.value.trim()) {
                demoTodos.push({
                    id: Date.now(),
                    text: input.value.trim(),
                    done: false
                });
                input.value = '';
                updateDemoTodos();
            }
        }

        function demoToggleTodo(index) {
            demoTodos[index].done = !demoTodos[index].done;
            updateDemoTodos();
        }

        function demoDeleteTodo(index) {
            demoTodos.splice(index, 1);
            updateDemoTodos();
        }

        function updateDemoTodos() {
            document.getElementById('demo-task-count').textContent = demoTodos.length;
            
            const list = document.getElementById('demo-todo-list');
            const emptyState = document.getElementById('demo-empty-state');
            
            if (demoTodos.length === 0) {
                list.innerHTML = '';
                emptyState.style.display = 'block';
            } else {
                emptyState.style.display = 'none';
                list.innerHTML = demoTodos.map((todo, i) => `
                    <div class="todo-item ${todo.done ? 'completed' : ''}">
                        <input type="checkbox" ${todo.done ? 'checked' : ''} 
                               onchange="demoToggleTodo(${i})">
                        <span>${todo.text}</span>
                        <button onclick="demoDeleteTodo(${i})" style="margin-left: auto;">√ó</button>
                    </div>
                `).join('');
            }
        }

        function runStep3() {
            try {
                updateDemoTodos();
                console.log('Step 3 demo initialized');
            } catch (error) {
                console.error('Error initializing Step 3:', error);
            }
        }

        // Step 4: Advanced Extensions Demo
        let demoIsOnline = false;
        let demoItems = ['Milk', 'Bread', 'Eggs'];
        
        function runStep4() {
            try {
                updateDemoStep4();
                console.log('Step 4 demo initialized');
            } catch (error) {
                console.error('Error initializing Step 4:', error);
            }
        }
        
        function toggleDemoStatus() {
            demoIsOnline = !demoIsOnline;
            const statusEl = document.getElementById('demo-status');
            const statusTextEl = document.getElementById('demo-status-text');
            
            statusEl.style.background = demoIsOnline ? '#d4edda' : '#f8d7da';
            statusEl.style.color = demoIsOnline ? '#155724' : '#721c24';
            statusTextEl.textContent = demoIsOnline ? 'Online' : 'Offline';
        }
        
        function addDemoItem() {
            const input = document.getElementById('demo-new-item');
            if (input.value.trim()) {
                demoItems.push(input.value.trim());
                input.value = '';
                updateDemoStep4();
            }
        }
        
        function removeDemoItem(index) {
            demoItems.splice(index, 1);
            updateDemoStep4();
        }
        
        function updateDemoStep4() {
            document.getElementById('demo-item-count').textContent = demoItems.length;
            
            const listEl = document.getElementById('demo-item-list');
            listEl.innerHTML = demoItems.map((item, i) => `
                <div style="display: flex; align-items: center; justify-content: space-between; padding: 0.5rem; margin: 0.25rem 0; background: #f8f9fa; border-radius: 4px;">
                    <span>${item}</span>
                    <button onclick="removeDemoItem(${i})" style="background: #dc3545; color: white; border: none; padding: 0.25rem 0.5rem; border-radius: 4px; cursor: pointer;">√ó</button>
                </div>
            `).join('');
            
            // Make remove functions global
            window.removeDemoItem = removeDemoItem;
        }
        
        function validateDemoEmail() {
            const input = document.getElementById('demo-email');
            const message = document.getElementById('demo-validation-message');
            const value = input.value;
            
            const isValid = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(value);
            const hasError = !isValid && value.length > 0;
            
            input.style.borderColor = hasError ? '#dc3545' : '#ced4da';
            message.style.display = hasError ? 'block' : 'none';
        }
        
        // Step 5: Form Validation Demo
        let demoFormData = {
            username: '',
            email: '',
            password: '',
            confirmPassword: ''
        };
        
        function runStep5() {
            try {
                setupFormValidation();
                console.log('Step 5 demo initialized');
            } catch (error) {
                console.error('Error initializing Step 5:', error);
            }
        }
        
        function setupFormValidation() {
            const fields = ['username', 'email-form', 'password', 'confirm-password'];
            const realFields = ['username', 'email', 'password', 'confirmPassword'];
            
            fields.forEach((field, index) => {
                const input = document.getElementById(`demo-${field}`);
                const errorEl = document.getElementById(`demo-${field}-error`);
                const realField = realFields[index];
                
                input.addEventListener('input', () => {
                    demoFormData[realField] = input.value;
                    validateDemoField(realField, input, errorEl);
                    updateDemoFormValidity();
                });
            });
        }
        
        function validateDemoField(field, input, errorEl) {
            const value = demoFormData[field] || '';
            let errors = [];
            
            if (field === 'username') {
                if (!value.trim()) errors.push('Username is required');
                else if (value.length < 3) errors.push('Username must be at least 3 characters');
            } else if (field === 'email') {
                if (!value.trim()) errors.push('Email is required');
                else if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(value)) errors.push('Please enter a valid email');
            } else if (field === 'password') {
                if (!value.trim()) errors.push('Password is required');
                else if (value.length < 6) errors.push('Password must be at least 6 characters');
            } else if (field === 'confirmPassword') {
                if (!value.trim()) errors.push('Please confirm your password');
                else if (value !== demoFormData.password) errors.push('Passwords do not match');
            }
            
            const hasError = errors.length > 0;
            input.style.borderColor = hasError ? '#dc3545' : '#28a745';
            errorEl.textContent = errors[0] || '';
            errorEl.style.display = hasError ? 'block' : 'none';
            
            return !hasError;
        }
        
        function updateDemoFormValidity() {
            const inputs = ['demo-username', 'demo-email-form', 'demo-password', 'demo-confirm-password'];
            const fields = ['username', 'email', 'password', 'confirmPassword'];
            
            let allValid = true;
            fields.forEach((field, index) => {
                const input = document.getElementById(inputs[index]);
                const errorEl = document.getElementById(`demo-${inputs[index].replace('demo-', '')}-error`);
                
                if (!validateDemoField(field, input, errorEl)) {
                    allValid = false;
                }
            });
            
            // Check if all fields have values
            const hasAllValues = fields.every(field => demoFormData[field] && demoFormData[field].trim());
            allValid = allValid && hasAllValues;
            
            const submitBtn = document.getElementById('demo-submit-btn');
            submitBtn.style.background = allValid ? 'var(--tutorial-blue)' : '#ccc';
            submitBtn.style.cursor = allValid ? 'pointer' : 'not-allowed';
            submitBtn.disabled = !allValid;
        }
        
        function submitDemoForm() {
            const successEl = document.getElementById('demo-success-message');
            successEl.style.display = 'block';
            setTimeout(() => {
                successEl.style.display = 'none';
            }, 3000);
        }
        
        // Step 6: Dashboard Demo
        let dashboardData = {
            users: 1250,
            revenue: 25000,
            serverLoad: 45,
            isUpdating: false
        };
        let dashboardTimer;
        
        function runStep6() {
            try {
                updateDashboardDisplay();
                console.log('Step 6 demo initialized');
            } catch (error) {
                console.error('Error initializing Step 6:', error);
            }
        }
        
        function toggleDemoUpdates() {
            dashboardData.isUpdating = !dashboardData.isUpdating;
            const btn = document.getElementById('demo-toggle-btn');
            btn.textContent = dashboardData.isUpdating ? 'Pause Updates' : 'Start Updates';
            
            if (dashboardData.isUpdating) {
                startDashboardUpdates();
            } else {
                clearInterval(dashboardTimer);
            }
        }
        
        function startDashboardUpdates() {
            const interval = parseInt(document.getElementById('demo-interval').value) || 3000;
            
            dashboardTimer = setInterval(() => {
                // Simulate data changes
                const userChange = Math.floor(Math.random() * 20) - 10;
                const revenueChange = Math.floor(Math.random() * 2000) - 1000;
                const loadChange = Math.floor(Math.random() * 20) - 10;
                
                dashboardData.users = Math.max(0, dashboardData.users + userChange);
                dashboardData.revenue = Math.max(0, dashboardData.revenue + revenueChange);
                dashboardData.serverLoad = Math.max(0, Math.min(100, dashboardData.serverLoad + loadChange));
                
                updateDashboardDisplay();
                addDashboardActivity(userChange, revenueChange);
            }, interval);
        }
        
        function updateDashboardDisplay() {
            document.getElementById('demo-users').textContent = dashboardData.users.toLocaleString();
            document.getElementById('demo-revenue').textContent = '$' + dashboardData.revenue.toLocaleString();
            document.getElementById('demo-server-load').textContent = dashboardData.serverLoad + '%';
            document.getElementById('demo-progress').style.width = dashboardData.serverLoad + '%';
        }
        
        function addDashboardActivity(userChange, revenueChange) {
            const activities = [
                `${userChange > 0 ? '+' : ''}${userChange} users`,
                `${revenueChange > 0 ? '+' : ''}$${revenueChange} revenue`,
                'Server status updated',
                'Backup completed',
                'Cache cleared'
            ];
            
            const activity = activities[Math.floor(Math.random() * activities.length)];
            const time = new Date().toLocaleTimeString().slice(0, 5);
            
            const logEl = document.getElementById('demo-activity-log');
            const newEntry = document.createElement('div');
            newEntry.style.cssText = 'font-size: 0.875rem; margin-bottom: 0.25rem; color: #666;';
            newEntry.textContent = `${time} - ${activity}`;
            
            logEl.insertBefore(newEntry, logEl.firstChild);
            
            // Keep only last 5 entries
            while (logEl.children.length > 5) {
                logEl.removeChild(logEl.lastChild);
            }
        }
        
        // Initialize when DOM is ready
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded, initializing tutorial...');
            updateProgress();
        });
        
        // Also try to initialize when the script loads
        updateProgress();
    </script>
</body>
</html>